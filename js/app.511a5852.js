(function(e){function t(t){for(var a,o,i=t[0],u=t[1],s=t[2],d=0,h=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&h.push(r[o][0]),r[o]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);l&&l(t);while(h.length)h.shift()();return c.push.apply(c,s||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],a=!0,i=1;i<n.length;i++){var u=n[i];0!==r[u]&&(a=!1)}a&&(c.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},r={app:0},c=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/compactcalendarvue3/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var l=u;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"2c60":function(e,t,n){"use strict";n("8ffa")},"3c22":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("7a23"),r=Object(a["f"])("  - "),c=["href"],o=Object(a["f"])("  -  "),i=Object(a["e"])("footer",{class:"no-print"},[Object(a["e"])("div",{class:"wrapper"},[Object(a["e"])("div",{class:"footer-menu"},[Object(a["e"])("p",null,[Object(a["e"])("a",{href:"https://davidseah.com/node/compact-calendar/"}," CompactCalendar "),Object(a["e"])("br"),Object(a["e"])("a",{href:"https://davidseah.com/blog/grid-all/"},"DavidSeah Blog"),Object(a["e"])("br"),Object(a["e"])("a",{href:"https://blog.tisseurdetoile.net"},"TisseurDeToile"),Object(a["e"])("br"),Object(a["e"])("a",{href:"https://github.com/tisseurdetoile/compactcalendarvue3/issues"},"An idea")])]),Object(a["e"])("div",{class:"about"},[Object(a["e"])("div",{class:"colophon"},[Object(a["e"])("p",null,[Object(a["f"])(" CompactCalendarVue is an Vue application "),Object(a["e"])("br"),Object(a["f"])(" CompactCalendar is a creation of "),Object(a["e"])("a",{href:"https://davidseah.com/"},"David Seah"),Object(a["e"])("br"),Object(a["f"])(" Adapted in "),Object(a["e"])("a",{herf:"https://vuejs.org/"},"Vue"),Object(a["f"])(" by "),Object(a["e"])("a",{href:"http://www.tisseurdetoile.net/"},"Le TisseurDeToile")])]),Object(a["e"])("div",{class:"copyright"},[Object(a["e"])("p",null,[Object(a["f"])(" © 2021 "),Object(a["e"])("a",{href:"https://davidseah.com/"},"David Seah")]),Object(a["e"])("p",null,[Object(a["f"])(" © 2021 "),Object(a["e"])("a",{href:"http://www.tisseurdetoile.net/"},"Le TisseurDeToile")])])])])],-1);function u(e,t,n,u,s,l){var d=Object(a["k"])("CompactCalendar");return Object(a["i"])(),Object(a["d"])("div",null,[Object(a["e"])("div",null,[Object(a["e"])("button",{class:"no-print",onClick:t[0]||(t[0]=function(){return l.minus&&l.minus.apply(l,arguments)})}," ﹤ "),r,Object(a["e"])("a",{href:"./?year="+l.currentYear},Object(a["l"])(l.currentYear),9,c),o,Object(a["e"])("button",{class:"no-print",onClick:t[1]||(t[1]=function(){return l.plus&&l.plus.apply(l,arguments)})}," ﹥ ")]),Object(a["g"])(d,{year:l.currentYear},null,8,["year"]),i])}n("d3b7"),n("3ca3"),n("ddb0"),n("9861"),n("ac1f"),n("841c");var s=["value"];function l(e,t,n,r,c,o){var i=Object(a["k"])("Calendar");return Object(a["i"])(),Object(a["d"])(a["a"],null,[(Object(a["i"])(!0),Object(a["d"])(a["a"],null,Object(a["j"])(e.zones,(function(n){return Object(a["i"])(),Object(a["d"])("div",{key:n,class:"no-print"},[Object(a["n"])(Object(a["e"])("input",{"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.currZone=t}),name:"currZone",type:"radio",value:n},null,8,s),[[a["m"],e.currZone]]),Object(a["e"])("label",null,Object(a["l"])(n),1)])})),128)),Object(a["g"])(i,{weeks:o.calendar.weeks,vacations:e.vacations,holidays:e.holiday.days,mondayfirst:o.calendar.mondayfirst},null,8,["weeks","vacations","holidays","mondayfirst"])],64)}n("a9e3"),n("5db7"),n("73d9"),n("d81d"),n("99af"),n("fb6a"),n("b64b");var d=n("d4ec"),h=n("bee2");function f(e,t){var n=new Date(e);return n.setDate(n.getDate()+t),n}function b(e){return f(e,1)}function p(e,t){var n=new Date(e),a=[];while(n<=t)a.push(new Date(n)),n=b(n);return a}function y(e,t){var n=new Date(e),a=[],r=0,c=[];while(n<=t)c.push(new Date(n)),n=b(n),r++>=6&&(a.push(c),c=[],r=0);return a}var O=function(){function e(t,n){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Object(d["a"])(this,e),this.startDate=t,this.endDate=n,this.startMonday=a}return Object(h["a"])(e,[{key:"getstartMonday",value:function(){return this.startMonday}},{key:"getStartWeekMonday",value:function(e){var t=[-6,0,-1,-2,-3,-4,-5],n=new Date(e);n.setUTCHours(0,0,0,0);var a=t[e.getDay()];return n.setDate(n.getDate()+a),n}},{key:"getEndWeekSunday",value:function(e){var t=[0,6,5,4,3,2,1],n=new Date(e);n.setUTCHours(0,0,0,0);var a=t[e.getDay()];return n.setDate(n.getDate()+a),n}},{key:"listDays",value:function(){return this.startMonday?this.listDaysFromMonday():[]}},{key:"listDaysFromMonday",value:function(){var e=this.getStartWeekMonday(this.startDate),t=this.getEndWeekSunday(this.endDate);return y(e,t)}}],[{key:"getWeekNumber",value:function(e){e=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),e.setUTCDate(e.getUTCDate()+4-(e.getUTCDay()||7));var t=new Date(Date.UTC(e.getUTCFullYear(),0,1)),n=Math.ceil(((e-t)/864e5+1)/7);return[e.getUTCFullYear(),n]}}]),e}(),j={class:"mondayfirst"};function v(e,t,n,r,c,o){var i=Object(a["k"])("WeekHeader"),u=Object(a["k"])("Week");return Object(a["i"])(),Object(a["d"])("ul",j,[Object(a["g"])(i,{week:n.weeks[0]},null,8,["week"]),(Object(a["i"])(!0),Object(a["d"])(a["a"],null,Object(a["j"])(n.weeks,(function(e){return Object(a["i"])(),Object(a["c"])(u,{key:e.id,week:e,vacations:n.vacations,holidays:n.holidays},null,8,["week","vacations","holidays"])})),128))])}var g=Object(a["e"])("li",null,null,-1);function w(e,t,n,r,c,o){var i=Object(a["k"])("WeekNumber"),u=Object(a["k"])("WeekMonth"),s=Object(a["k"])("Day");return Object(a["i"])(),Object(a["d"])(a["a"],null,[Object(a["g"])(i,{"day-of-week":o.lastDay},null,8,["day-of-week"]),Object(a["g"])(u,{"day-of-week":o.lastDay,"changed-month":o.changedMonth},null,8,["day-of-week","changed-month"]),(Object(a["i"])(!0),Object(a["d"])(a["a"],null,Object(a["j"])(n.week,(function(e){return Object(a["i"])(),Object(a["c"])(s,{key:e.id,day:e,"changed-month":o.changedMonth,holidays:n.holidays,vacations:n.vacations},null,8,["day","changed-month","holidays","vacations"])})),128)),g],64)}n("7db0");function m(e,t,n,r,c,o){return Object(a["i"])(),Object(a["d"])("li",{class:Object(a["h"])([{past:!o.elaspedDate},"week"])},Object(a["l"])(o.weekNumber),3)}var D={props:{dayOfWeek:Date},computed:{weekNumber:function(){var e=O.getWeekNumber(this.dayOfWeek)[1];return e<10?"0"+e:""+e},elaspedDate:function(){var e=new Date;return e<this.dayOfWeek}}},k=(n("b173"),n("6b0d")),M=n.n(k);const C=M()(D,[["render",m],["__scopeId","data-v-2b83f490"]]);var Y=C;function S(e,t,n,r,c,o){return Object(a["i"])(),Object(a["d"])("li",{class:Object(a["h"])([{hidden:!n.changedMonth},"month"])},Object(a["l"])(o.weekMonth),3)}n("38cf");var W={props:{dayOfWeek:Date,changedMonth:Boolean},computed:{weekMonth:function(){var e={month:"short"},t=this.dayOfWeek.toLocaleDateString(void 0,e);if(t.length<6){var n=5-t.length,a=" ".repeat(n);return t+a}return t}}};const T=M()(W,[["render",S]]);var F=T;function U(e,t,n,r,c,o){return Object(a["i"])(),Object(a["d"])("li",{class:Object(a["h"])(["day",{firstDay:o.firstDayOfMonth,startOfMonth:o.startOfMonth,endOfMonth:o.endOfMonth,holyday:o.isHolyDay,vacation:o.isVacation}])},[Object(a["e"])("span",null,Object(a["l"])(n.day.toLocaleDateString(void 0,{day:"2-digit"})),1)],2)}n("caad"),n("2532");var Z={props:{day:Date,changedMonth:Boolean,vacations:{type:Object,default:function(){}},holidays:{type:Array,default:function(){return[]}}},computed:{isVacation:function(){var e=parseFloat("".concat(this.day.getMonth()+1,".").concat(this.day.toLocaleDateString(void 0,{day:"2-digit"})));return!!Object.prototype.hasOwnProperty.call(this.vacations,this.day.getFullYear())&&this.vacations[this.day.getFullYear()].includes(e)},isHolyDay:function(){var e=parseFloat("".concat(this.day.getMonth()+1,".").concat(this.day.toLocaleDateString(void 0,{day:"2-digit"})));return this.holidays.includes(e)},firstDayOfMonth:function(){return 1===this.day.getDate()},startOfMonth:function(){return this.day.getDate()<=7&&this.changedMonth},endOfMonth:function(){return this.day.getDate()>20&&this.changedMonth}}};n("2c60");const L=M()(Z,[["render",U],["__scopeId","data-v-1d5ddd82"]]);var P=L,_={components:{WeekNumber:Y,WeekMonth:F,Day:P},props:{week:{type:Array,default:function(){return[]}},holidays:{type:Array,default:function(){return[]}},vacations:{type:Object,default:function(){}}},computed:{changedMonth:function(){return void 0!==this.week.find((function(e){return 1==e.getDate()}))},lastDay:function(){return this.week[6]}}};const A=M()(_,[["render",w]]);var N=A,x=Object(a["e"])("li",{class:"header hweek"}," # ",-1),H=Object(a["e"])("li",{class:"header hmonth"}," mois ",-1),V=Object(a["e"])("li",null,null,-1);function z(e,t,n,r,c,o){return Object(a["i"])(),Object(a["d"])(a["a"],null,[x,H,(Object(a["i"])(!0),Object(a["d"])(a["a"],null,Object(a["j"])(n.week,(function(e){return Object(a["i"])(),Object(a["d"])("li",{key:e.id,class:"header hday"},[Object(a["e"])("span",null,Object(a["l"])(e.toLocaleDateString(void 0,{weekday:"narrow"})),1)])})),128)),V],64)}var B={props:{week:{type:Array,default:function(){return[]}}},computed:{changedMonth:function(){return void 0!==this.week.find((function(e){return 1==e.getDate()}))},lastDay:function(){return this.week[6]}}};const I=M()(B,[["render",z]]);var E=I,J={components:{Week:N,WeekHeader:E},props:{mondayfirst:Boolean,weeks:{type:Array,default:function(){return[]}},vacations:{type:Object,default:function(){return{}}},holidays:{type:Array,default:function(){return[]}}}};const R=M()(J,[["render",v]]);var q=R,G={name:"CompactCalendar",components:{Calendar:q},props:{year:{type:Number,default:(new Date).getFullYear()}},data:function(){return{currZone:null,zones:[],holiday:{},vacations:{}}},computed:{calendar:function(){var e=new Date(this.year,0,1,13,0,0),t=new Date(this.year,11,31,13,0,0),n=new O(e,t);return{weeks:n.listDaysFromMonday(),mondayfirst:n.getstartMonday()}}},watch:{year:"fetchData",currZone:"loadZone"},created:function(){this.fetchData()},methods:{loadZone:function(){null===this.currZone&&(this.currZone=this.zones[0]);var e=this.holiday.vacation[this.currZone].flatMap((function(e){return p(new Date(e.start),new Date(e.end))})),t={};e.map((function(e){var n=e.getFullYear(),a=parseFloat("".concat(e.getMonth()+1,".").concat(e.toLocaleDateString(void 0,{day:"2-digit"})));return Object.prototype.hasOwnProperty.call(t,n)?t[n].push(a):t[n]=[a],t})),this.vacations=t},fetchData:function(){var e=this,t="./".concat(navigator.language.slice(-2).toLowerCase(),"/").concat(this.year,".json");fetch(t,{method:"get",headers:{"content-type":"application/json"}}).then((function(e){return e.json()}),(function(e){throw new Error("Something went wrong e=".concat(e))})).then((function(t){e.holiday=t,e.zones=Object.keys(e.holiday.vacation),e.loadZone()}),(function(e){console.log("no json data for ".concat(t," error:>").concat(e,"<"))}))}}};n("a643");const K=M()(G,[["render",l]]);var Q=K,X={name:"App",components:{CompactCalendar:Q},data:function(){return{selectedYear:null}},computed:{parameters:function(){return new URLSearchParams(window.location.search)},currentYear:function(){if(null===this.selectedYear){var e=null;if(null!==this.parameters.get("year")&&(e=parseInt(this.parameters.get("year"))),null!==this.parameters.get("annee")&&(e=parseInt(this.parameters.get("annee"))),null!==e)return e;var t=new Date;return t.getFullYear()}return this.selectedYear}},methods:{minus:function(){null===this.selectedYear&&(this.selectedYear=this.currentYear),this.selectedYear--},plus:function(){null===this.selectedYear&&(this.selectedYear=this.currentYear),this.selectedYear++}}};n("e4aa");const $=M()(X,[["render",u]]);var ee=$;Object(a["b"])(ee).mount("#app")},"8a7a":function(e,t,n){},"8ffa":function(e,t,n){},a563:function(e,t,n){},a643:function(e,t,n){"use strict";n("a563")},b173:function(e,t,n){"use strict";n("3c22")},e4aa:function(e,t,n){"use strict";n("8a7a")}});
//# sourceMappingURL=app.511a5852.js.map